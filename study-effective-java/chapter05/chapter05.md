# 5장. 제네릭
## 다루는 것
- `제네릭(generic)`의 이점을 최대로 살리고 단점을 최소화하는 방법

## 아이템 목록
26. raw 타입은 사용하지 말라
27. 비검사 경고를 제거하라
28. 배열보다는 리스트를 사용하라
29. 이왕이면 제네릭 타입으로 만들라
30. 이왕이면 제네릭 메서드로 만들라
31. 한정적 와일드카드를 사용해 API 유연성을 높이라
32. 제네릭과 가변인수를 함께 쓸 때는 신중하라
33. 타입 안전 이종 컨테이너를 고려하라

## 아이템 26. raw 타입은 사용하지 말라
> raw 타입을 사용하면 런타임에 예외가 일어날 수 있으니 사용하면 안된다.

### 용어
- 제네릭 타입 - 제네릭 클래스와 제네릭 인터페이스를 통틀어 표현
- 제네릭 클래스 - 클래스 선언에 타입 매개변수(type parameter)가 쓰인 경우
- 제네릭 인터페이스 - 인터페이스 선언에 타입 매개변수(type parameter)가 쓰인 경우
- 매개변수화 타입 - List<String>
- 실제 타입 매개변수 - String
- 제네릭 타입 - List<E>
- 정규 타입 매개변수 - E
- 비한정적 와일드카드 타입 - List<?>
- raw 타입 - List
 
### 개념 정리
- raw 타입을 쓰면 제네릭이 안겨주는 안전성과 표현력을 모두 잃게 된다.
- `Set<Object>`는 어떤 타입의 객체도 저장할 수 있는 매개변수화 타입이다.  
- `Set<?>`는 모종의 타입 객체만 저장할 수 있는 와일드카드 타입이다.  
- `Set<Object>`, `Set<?>`는 안전하지만, raw 타입인 Set은 안전하지 않다.

### 코드 예시
- 컬렉션의 raw 타입
  ```java
  // Stamp 인스턴스만 취급한다.  // 따라하지 말 것
  private final Collection stamps = ...;
  ```
- 매개변수화된 컬렉션 타입
  ```java
  // Stamp 인스턴스만 취급한다.  // 타입 안정성 확보!
  private final Collection<Stamp> stamps = ...;
  ```

### 비한정적 와일드카드
- 비한정적 와일드카드 타입인 Set<?>와 raw 타입인 Set의 차이
- 와일드카드 타입은 안전하고 raw 타입은 안전하지 않다.
- raw 타입 컬렉션에는 아무 원소나 넣을 수 있으니 타입 불변식을 훼손하기 쉽다.
- 반면, Collection<?>에는 어떤 원소도 넣을 수 없다.

## 아이템 27. 비검사 경고를 제거하라
> 비검사 경고는 중요하니 무시하지 말자.  
> 모든 비검사 경고는 런타임에 ClassCastException을 일으킬 수 있는 잠재적 가능성을 뜻하니 최선을 다해 제거하라.  
> 경고를 없앨 방법을 찾지 못하겠다면, 그 코드가 타입 안전함을 증명하고 가능한 한 범위를 좁혀 @SuppressWarnings("unchecked") 애너테이션으로 경고를 숨겨라.
> 그런 다음 경고를 숨기기로 한 근거를 주석으로 남겨라.

## 아이템 28. 배열보다는 리스트를 사용하라
> 배열은 런타임에는 타입 안전하지만 컴파일타임에는 그렇지 않다. 제네릭은 반대다.  
> 둘을 섞어 쓰다가 컴파일 오류나 경고를 만나면, 가장 먼저 배열을 리스트로 대체하는 방법을 적용해보자.

## 아이템 29. 이왕이면 제네릭 타입으로 만들라
> 클라이언트에서 직접 형변환해야 하는 타입보다 제네릭 타입이 더 안전하고 쓰기 편하다.  
> 그러니 새로운 타입을 설계할 때는 형변환 없이도 사용할 수 있도록 하라.  
> 기존 타입을 제네릭 타입으로 변경하는 것이 기존 클라이언트에는 아무 영향을 주지 않으면서, 새로운 사용자를 훨씬 편하게 해주는 길이다.

## 아이템 30. 이왕이면 제네릭 메서드로 만들라
> 클라이언트에서 입력 매개변수와 반환값을 명시적으로 형변환해야 하는 메서드보다 제네릭 메서드가 더 안전하며 사용하기도 쉽다.  
> 형변환을 해줘야 하는 기존 메서드는 제네릭하게 만들자.

## 아이템 31. 한정적 와일드카드를 사용해 API 유연성을 높이라
> 조금 복잡하더라도 와일드카드 타입을 적용하면 API가 훨씬 유연해진다.
> 그러니 널리 쓰일 라이브러리를 작성한다면 반드시 와일드카드 타입을 적절히 사용해줘야한다.

- PECS 공식
  - 생산자(producer)는 extends를 사용하고 소비자(consumer)는 super를 사용한다.
  - P: producer
  - E: extends
  - C: consumer
  - S: super

## 아이템 32. 제네릭과 가변인수를 함께 쓸 때는 신중하라
> 가변인수 기능은 배열을 노출하여 추상화가 완벽하지 못하다.
> 제네릭 varargs 매개변수는 타입 안전하지 않지만, 허용된다. 메서드가 타입 안전한지 확인한 다음 @SafeVarargs 애너테이션을 달자.

## 아이템 33. 타입 안전 이종 컨테이너를 고려하다
> Class를 키로 쓰며, 이런 식으로 쓰이는 Class 객체를 타입 토근이라 한다.